<!-- Created on 2016-08-27 -->
<link rel="import" href="../polymer/polymer.html">

<script>
  window.PaperSelect = window.PaperSelect || {};

  PaperSelect.ClickOutsideBehavior = {
    _outsideClickListener: function (event) {
      console.log('on outside click...');
      var eventPath = Polymer.dom(event).path;
      if (eventPath.indexOf(this) === -1) {
        this._opened = false;
      }
    },

    _addOutsideClickListener: function () {
      Polymer.Gestures.add(document, 'tap', null);
      this.callbackInstance = this.callbackInstance || this._outsideClickListener.bind(this);

      document.addEventListener('tap', this.callbackInstance, true);
      document.addEventListener('click', this.callbackInstance, false);
    },

    _removeOutsideClickListener: function () {
      // Not sure if this is a good idea to remove this Gesture globally, but that's how the iron-overlay-behavior does it.
      Polymer.Gestures.remove(document, 'tap', null);
      document.removeEventListener('tap', this.callbackInstance, true);
      document.removeEventListener('click', this.callbackInstance, false);
    }
  }
</script>
